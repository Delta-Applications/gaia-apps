
(function(exports){'use strict';var hasVolumeKey=false;var hasVT=false;var hasEndCallKey=false;Promise.all([navigator.hasFeature('device.capability.volume-key'),navigator.hasFeature('device.capability.vilte'),navigator.hasFeature('device.capability.endcall-key')]).then((values)=>{hasVolumeKey=values[0];hasVT=values[1];hasEndCallKey=values[2];setOptionParams();});function setOptionParams(){var incommingCall={header:{l10nId:'kai-incoming-call'},items:[{name:'Answer',l10nId:'kai-answer',priority:1,method:function(){CallsHandler.answer();}},{get name(){if(Rtt.settings===RTT_ALWAYS_VISIBLE){return'ANS RTT';}else if(CallsHandler.isIncomingNumberAllowed()){return'reply';}
return'';},get l10nId(){if(Rtt.settings===RTT_ALWAYS_VISIBLE){return'req-rtt-call';}else if(CallsHandler.isIncomingNumberAllowed()){return'reply';}
return'';},priority:2,method:function(){if(Rtt.settings===RTT_ALWAYS_VISIBLE){Rtt.requestIncomingRtt();}else if(CallsHandler.isIncomingNumberAllowed()){CallScreen.toggleReplyMenu(true);}}},{l10nId:'kai-decline',name:'Decline',priority:3,method:function(){CallsHandler.end();}}]};var incommingRttCall={items:[{name:'Answer',get l10nId(){return(Rtt.settings===RTT_ALWAYS_VISIBLE)?'answer-rtt-call':'kai-answer';},priority:1,method:function(){CallsHandler.answer();}},{name:'Decline',l10nId:'kai-decline',priority:3,method:function(){CallsHandler.end();}}]};var incommingVTCall={header:{l10nId:'kai-incoming-call'},items:[{name:'Answer',l10nId:'kai-answer',priority:1,method:function(){CallsHandler.answer();CallsHandler.enableSpeakerForVT();}},{name:'Voice call',icon:'video-off',priority:2,method:function(){CallsHandler.answer('voice');}},{l10nId:'kai-decline',name:'Decline',priority:3,method:function(){CallsHandler.end();}}]};var finalCallEndParams={items:[{name:'',l10nId:'',priority:2,method:()=>{}}]};var speakerItem={get name(){if(CallsHandler.isBTReceiverUsed){return'Sound';}else{return CallsHandler.isSpeakerEnabled?'Speaker-off':'Speaker';}},get l10nId(){if(CallsHandler.isBTReceiverUsed){return'sound';}else{return'';}},get icon(){if(CallsHandler.isBTReceiverUsed){return null;}else{return CallsHandler.isSpeakerEnabled?'mute':'speaker-on';}},priority:2,method:function(){if(CallsHandler.isBTReceiverUsed){CallScreen.toggleBluetoothMenu(true);}else{window.performance.mark('toggleSpeaker-start');CallsHandler.toggleSpeaker();CallsHandler.enableSpeaker=CallsHandler.isSpeakerEnabled?true:false;var paramName=OptionHelper.getLastParamName();OptionHelper.show(paramName);var message=CallsHandler.isSpeakerEnabled?'kai-speaker-on-notification':'kai-speaker-off-notification';CallScreen.showToast(message);window.performance.mark('toggleSpeaker-end');window.performance.measure('performance-toggleSpeaker','toggleSpeaker-start','toggleSpeaker-end');window.performance.clearMarks('toggleSpeaker-start');window.performance.clearMarks('toggleSpeaker-end');window.performance.clearMeasures('performance-toggleSpeaker');}}};var muteItem={get name(){return CallsHandler.isMute?'Unmute':'Mute';},get l10nId(){return CallsHandler.isMute?'kai-unmute':'kai-mute';},priority:1,method:function(){CallsHandler.toggleMute();var paramName=OptionHelper.getLastParamName();OptionHelper.show(paramName);var message=CallsHandler.isMute?'kai-microphone-mute-notification':'kai-microphone-active-notification';CallScreen.showToast(message);CallScreen.updateCallsMuteState();}};var inCallParams={header:{l10nId:'softkey-options'},items:[muteItem,speakerItem]};var inCallVolumeKeyItem={name:'Volume',l10nId:'volume',priority:11,method:function(){CallScreen.requestVolume('show');}};var addCallItem={get name(){return CallsHandler.isAnyEmergencyCall()?'':'Add-to-call';},get l10nId(){return CallsHandler.isAnyEmergencyCall()?'':'kai-add-to-call';},priority:4,method:function(){if(LockScreen.isScreenLocked()){LockScreen.showLockScreen(true);}else{CallScreen.placeNewCall();}}};var updateVTCallItem={name:'Video-call',l10nId:'video-call',priority:5,method:function(){CallsHandler.changeCallType();}}
var inVTCallCameraItem=[{get name(){return VT.isCameraFront()?'Rear camera':'Front camera';},get l10nId(){return VT.isCameraFront()?'rear-camera':'front-camera';},priority:7,method:function(){CallsHandler.changeCamera();}}];var VTCallItem=[{get name(){return VT.isCameraOn()?'Camera off':'Camera on';},get l10nId(){return VT.isCameraOn()?'camera-off':'camera-on';},priority:8,method:function(){CallsHandler.toggleCamera();}},{get name(){return CallsHandler.isVideoCall()?'Voice call':'Video call';},get l10nId(){return CallsHandler.isVideoCall()?'voice-call':'video-call';},priority:9,method:function(){CallsHandler.changeCallType();}},{get name(){return CallsHandler.isShowInfo?'Hide info':'';},get l10nId(){return CallsHandler.isShowInfo?'hide-info':'';},priority:10,method:function(){CallsHandler.toggleShowInfo(true);}},{get name(){return CallsHandler.isShowInfo?'':'Show info';},get l10nId(){return CallsHandler.isShowInfo?'':'show-info';},priority:10,method:function(){CallsHandler.toggleShowInfo(false);}}];var inRttCallItem=[{name:'Rtt view',l10nId:'rtt-view',priority:6,method:function(){CallScreen.showRttView();}},{name:'Voice call',l10nId:'voice-call',priority:7,method:function(){Rtt.enableRttMode(false);}}];var inCall_requestRttItem={get name(){return CallsHandler.activeCallSupportRtt()?'RTT call':'';},get l10nId(){return CallsHandler.activeCallSupportRtt()?'rtt-call':'';},priority:6,method:function(){if(CallsHandler.activeCallSupportRtt()){Rtt.enableRttMode(true);}}};var resumeCallItem={name:'Unhold-call',l10nId:'unhold-call',priority:4,method:function(){CallsHandler.holdOrResumeCallByUser();}};var holdCallItem={get name(){return CallsHandler.isAnyEmergencyCall()?'':'Hold-call';},get l10nId(){return CallsHandler.isAnyEmergencyCall()?'':'hold-call';},priority:4,method:function(){CallsHandler.holdOrResumeCallByUser();}};var messagesItem={name:'messages',l10nId:'messages',priority:8,method:function(){CallScreen.launchMessages();}};var manageCallItem={name:'Manage call',l10nId:'manage-call',priority:5,method:function(){ConferenceGroupUI.showGroupDetails();CallScreenHelper.showGroupCallsOptions();}};var inCallSecondLineOnHoldItem=[{get name(){return CallsHandler.isAnyEmergencyCall()?'':'Switch-to-second-line';},get l10nId(){return CallsHandler.isAnyEmergencyCall()?'':'kai-switch-to-second-line';},priority:3,method:function(){CallsHandler.toggleCalls();}},{get name(){return(CallsHandler.anyCallInRttMode()||CallsHandler.isAnyEmergencyCall())?'':'Merge-calls';},get l10nId(){return(CallsHandler.anyCallInRttMode()||CallsHandler.isAnyEmergencyCall())?'':'kai-merge-calls';},priority:4,method:function(){if(!CallsHandler.anyCallInRttMode()){CallsHandler.mergeCalls();}}}];var inCallAnswerOrHoldItems=[{name:'End and answer',l10nId:'kai-end-answer',priority:5,method:function(){console.log('end-and-answer');CallsHandler.endAndAnswer();if(window.navigator.mozTelephony.muted){CallsHandler.unMute();}}},{name:'Answer',l10nId:'kai-answer',priority:3,method:function(){console.log('hold-and-answer');CallsHandler.holdAndAnswer();}},{l10nId:'kai-decline',name:'Decline',priority:4,method:function(){console.log('Ignore-call');CallsHandler.ignore();}}];var inCallEndAndAnswerItems=[{name:'End and answer',l10nId:'kai-end-answer',priority:3,method:function(){console.log('end-and-answer');CallsHandler.holdAndAnswer();if(window.navigator.mozTelephony.muted){CallsHandler.unMute();}}},{l10nId:'kai-decline',name:'Decline',priority:4,method:function(){console.log('Ignore-call');CallsHandler.ignore();}}];var InCall_CDMAswitchCallsItem={name:'Swap Call',l10nId:'kai-switch-to-second-line',priority:4,method:function(){CallsHandler.toggleCalls();}};var inCallTemplate=Object.assign({},inCallParams);if(!hasVolumeKey){inCallTemplate.items=inCallParams.items.concat(inCallVolumeKeyItem);}
var inCallAddToCallParams=Object.assign({},inCallTemplate);inCallAddToCallParams.items=inCallTemplate.items.concat(addCallItem);var inActiveCallParams=Object.assign({},inCallAddToCallParams);inActiveCallParams.items=inCallAddToCallParams.items.concat(holdCallItem);inActiveCallParams.items.push(messagesItem);var inRttCallParams=Object.assign({},inActiveCallParams);inRttCallParams.items=inActiveCallParams.items.concat(inRttCallItem);inActiveCallParams.items=inActiveCallParams.items.concat(inCall_requestRttItem);var inActiveCallNotSupportVTParams=Object.assign({},inActiveCallParams);if(hasVT){inActiveCallParams.items=inActiveCallParams.items.concat(updateVTCallItem);}
var InConnectingVTCallParams=Object.assign({},inCallTemplate);InConnectingVTCallParams.items=inCallTemplate.items.concat(inVTCallCameraItem);var inVTCallParams=Object.assign({},inCallTemplate);inVTCallParams.items=inCallTemplate.items.concat(inVTCallCameraItem);inVTCallParams.items=inVTCallParams.items.concat(VTCallItem);var inHeldCallParams=Object.assign({},inCallAddToCallParams);inHeldCallParams.items=inCallAddToCallParams.items.concat(resumeCallItem);inHeldCallParams.items.push(messagesItem);var inConfernceCallParams=Object.assign({},inCallAddToCallParams);inConfernceCallParams.items=inCallAddToCallParams.items.concat(manageCallItem);var inActiveConfernceCallParams=Object.assign({},inConfernceCallParams);inActiveConfernceCallParams.items=inConfernceCallParams.items.concat(holdCallItem);var inHeldConfernceCallParams=Object.assign({},inConfernceCallParams);inHeldConfernceCallParams.items=inConfernceCallParams.items.concat(resumeCallItem);var inCallTwoLinesParams=Object.assign({},inCallTemplate);inCallTwoLinesParams.items=inCallTemplate.items.concat(inCallSecondLineOnHoldItem);var inConferenceTwoLinesParams=Object.assign({},inCallTwoLinesParams);inConferenceTwoLinesParams.items=inCallTwoLinesParams.items.concat(manageCallItem);var inCallTwoLinesActiveRttParams=Object.assign({},inCallTwoLinesParams);inCallTwoLinesActiveRttParams.items=inCallTwoLinesActiveRttParams.items.concat(inRttCallItem);inCallTwoLinesParams.items=inCallTwoLinesParams.items.concat(inCall_requestRttItem);var inCallAnswerOrHoldParams=Object.assign({},inCallTemplate);inCallAnswerOrHoldParams.items=inCallTemplate.items.concat(inCallAnswerOrHoldItems);var inCallEndAndAnswerParams=Object.assign({},inCallTemplate);inCallEndAndAnswerParams.items=inCallTemplate.items.concat(inCallEndAndAnswerItems);var InCall_CDMAswitchCalls=Object.assign({},inCallTemplate);InCall_CDMAswitchCalls.items=inCallTemplate.items.concat(InCall_CDMAswitchCallsItem);var cancelOptions={l10nId:'cancel',name:'Cancel',priority:1,method:function(){ConferenceGroupUI.hideGroupDetails();}};var privateOptions={get l10nId(){return CallsHandler.isConferenceConnected?'private':null;},get name(){return CallsHandler.isConferenceConnected?'Private':null;},priority:2,method:function(){if(CallsHandler.isConferenceConnected){ConferenceGroupUI.separateCall();}}};var endOptions={name:'End',l10nId:'end',priority:3,method:function(){ConferenceGroupUI.endCall();}};var manageCallVoLTE={items:[]};var manageCallGSM={items:[]};if(hasEndCallKey){endOptions.priority=1;privateOptions.priority=3;manageCallVoLTE.items.push(endOptions);manageCallGSM.items.push(endOptions);manageCallGSM.items.push(privateOptions);}else{manageCallVoLTE.items.push(cancelOptions);manageCallVoLTE.items.push(endOptions);manageCallGSM.items.push(cancelOptions);manageCallGSM.items.push(privateOptions);manageCallGSM.items.push(endOptions);}
var menuDialogParams={items:[{l10nId:'cancel',name:'Cancel',priority:1,method:function(){if(CallScreen.bluetoothMenu.classList.contains('display')){CallScreen.toggleBluetoothMenu(false);}else if(CallScreen.replyMenu.classList.contains('display')){CallScreen.toggleReplyMenu(false);}}},{name:'Select',l10nId:'select',priority:2,method:function(){if(CallScreen.replyMenu.classList.contains('display')){CallScreen.replyItemSelected();}}}]};var dialerHelperOption={header:{l10nId:'param1'},items:[{get name(){return hasEndCallKey?'Cancel':'Clear';},get l10nId(){return hasEndCallKey?'cancel':'clear';},priority:1,method:function(){if(hasEndCallKey){DialerHelper.hideDialerHelper();}else{DialerHelper.clearPhoneNumber();}}},{l10nId:'call',priority:2,method:function(){DialerHelper.callNumber();}},{l10nId:'more',name:'more',priority:3,method:function(){CallScreen.launchMore();}}]};var dialerHelperCommandModeOption={header:{l10nId:'param1'},items:[{name:'Cancel',l10nId:'cancel',priority:1,method:function(){DialerHelper.hideDialerHelper();}}]};var dtmfScreenOption={header:{l10nId:'param1'},items:[{name:'Cancel',l10nId:'cancel',priority:1,method:function(){CallScreen.hideDtmfNumber();}}]};var rttViewParams　={header:{l10nId:'softkey-options'},items:[{name:'back',l10nId:'back',priority:1,method:function(){CallScreenHelper.render();}},speakerItem]};var lockScreenParams={header:{l10nId:'softkey-options'},items:[{name:'cancel',l10nId:'cancel',priority:1,method:function(){CallScreenHelper.render();}}]};OptionHelper.optionParams['inCallParams']=inCallParams;OptionHelper.optionParams['incommingCall']=incommingCall;OptionHelper.optionParams['incommingRttCall']=incommingRttCall;OptionHelper.optionParams['incommingVTCall']=incommingVTCall;OptionHelper.optionParams['inActiveCallParams']=inActiveCallParams;OptionHelper.optionParams['inActiveCallNotSupportVTParams']=inActiveCallNotSupportVTParams;OptionHelper.optionParams['inActiveConfernceCallParams']=inActiveConfernceCallParams;OptionHelper.optionParams['InConnectingVTCallParams']=InConnectingVTCallParams;OptionHelper.optionParams['inVTCallParams']=inVTCallParams;OptionHelper.optionParams['inRttCallParams']=inRttCallParams;OptionHelper.optionParams['inHeldCallParams']=inHeldCallParams;OptionHelper.optionParams['inConfernceCallParams']=inConfernceCallParams;OptionHelper.optionParams['inHeldConfernceCallParams']=inHeldConfernceCallParams;OptionHelper.optionParams['inConferenceTwoLinesParams']=inConferenceTwoLinesParams;OptionHelper.optionParams['inCallAnswerOrHoldParams']=inCallAnswerOrHoldParams;OptionHelper.optionParams['inCallEndAndAnswerParams']=inCallEndAndAnswerParams;OptionHelper.optionParams['inCallTwoLinesParams']=inCallTwoLinesParams;OptionHelper.optionParams['inCallTwoLinesActiveRttParams']=inCallTwoLinesActiveRttParams;OptionHelper.optionParams['InCall_CDMAswitchCalls']=InCall_CDMAswitchCalls;OptionHelper.optionParams['manageCallGSM']=manageCallGSM;OptionHelper.optionParams['manageCallVoLTE']=manageCallVoLTE;OptionHelper.optionParams['menuDialogParams']=menuDialogParams;OptionHelper.optionParams['dialerHelperOption']=dialerHelperOption;OptionHelper.optionParams['dialerHelperCommandModeOption']=dialerHelperCommandModeOption;OptionHelper.optionParams['dtmfScreenOption']=dtmfScreenOption;OptionHelper.optionParams['finalCallEndParams']=finalCallEndParams;OptionHelper.optionParams['rttViewParams']=rttViewParams;OptionHelper.optionParams['lockScreenParams']=lockScreenParams;}})(window);