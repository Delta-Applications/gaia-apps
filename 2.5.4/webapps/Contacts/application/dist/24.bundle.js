webpackJsonp([24],{284:function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),i=t(3),l=r(i),c=t(10),u=r(c),f=t(4),d=r(f),p=t(5),m=r(p),v=t(21),h=r(v),y=t(11),b=r(y),w=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name="ExportProgressView",r.state={progress:0,total:0},r}return o(t,e),s(t,[{key:"componentDidMount",value:function(){var e={left:"cancel",center:""};window.addEventListener("blur",function e(){window.removeEventListener("blur",e),d.default.request("back")}),this.export(),this.element=u.default.findDOMNode(this),this._softKey=h.default.create(this.element,e)}},{key:"componentWillUnmount",value:function(){this._softKey.destroy()}},{key:"export",value:function(){var e=this,t=b.default.getExporter();this.exporter=t,t.on("exported",function(){e.setState({progress:t.current,total:t.total})}),t.on("finished",function(){if(e.element.contains(document.activeElement)){if(t.error){var r="",a=navigator.mozL10n.get;return r=a("NoFreeSpace"===t.error?"contact-export-error-sd-full":"contact-export-error-unknown"),t.savedNum&&(r+=a("contact-exported2",{exported:t.savedNum})),void d.default.request("showDialog",{header:a("export-contact-failed"),type:"alert",content:r,translated:!0,onOk:function(){d.default.request("back")}})}e.state.total<=2?setTimeout(function(){d.default.request("back")},500):d.default.request("back")}}),t.on("ready",function(){e.setState({total:t.total})}),setTimeout(function(){t.export()},500)}},{key:"onKeyDown",value:function(e){switch(e.key){case"SoftLeft":case"Backspace":case"EndCall":e.preventDefault(),e.stopPropagation(),this.exporter&&this.exporter.cancel(),d.default.request("back")}}},{key:"render",value:function(){var e=this,t=null,r=null;if(this.state.total){var a=this.exporter&&!this.exporter.hasDeterminativeProgress,n=this.state.progress/this.state.total*100;if(a)t=l.default.createElement("div",{className:"progress","data-infinite":"true"},l.default.createElement("div",{className:"progress-active"}));else{var o={width:n+"%"},s={width:"calc(100% - "+n+"% - 0.3rem)"};t=l.default.createElement("div",{className:"progress","data-infinite":a?"true":"false"},l.default.createElement("div",{className:"progress-active",style:o}),l.default.createElement("div",{className:"progress-inactive",style:s})),r=l.default.createElement("div",{className:"secondary"},this.state.progress,"/",this.state.total)}}return l.default.createElement("div",{className:"export-progress-view",tabIndex:"-1",onKeyDown:function(t){return e.onKeyDown(t)}},l.default.createElement("div",{className:"header h1",ref:"header","data-l10n-id":"export-contacts"}),l.default.createElement("div",{className:"body"},l.default.createElement("div",{className:"list-item"},l.default.createElement("div",{className:"content"},l.default.createElement("div",{className:"primary","data-l10n-id":this.exporter&&this.exporter.title}),r,t))))}}]),t}(m.default);exports.default=w}});
//# sourceMappingURL=24.bundle.js.map