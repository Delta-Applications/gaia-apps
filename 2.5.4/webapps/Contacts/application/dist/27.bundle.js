webpackJsonp([27],{278:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=t(3),c=n(u),s=t(5),l=n(s),f=t(4),d=n(f),p=t(24),g=n(p),h=t(21),y=n(h),v=t(79),b=n(v),m=t(29),L=t(25),_=n(L),P=navigator.mozL10n.get,w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="AccountAdding",n.DEBUG=!1,n.onKeyDown=function(e){if(!n.state.onLoginPage)switch(e.key){case"Enter":if(!navigator.onLine)return void d.default.request("offlineCallback");n._setOnLoginPage();break;case"SoftLeft":case"Backspace":e.preventDefault(),e.stopPropagation(),d.default.request("back")}},n.debug("constructor:"),n.state={onLoginPage:!1},n}return i(t,e),r(t,[{key:"componentDidMount",value:function(){this.debug("did mount"),this.navigator=new g.default(".navigable:not(.disabled)",this.element),this._softKey=y.default.create(this.element,{left:"cancel",center:"select"})}},{key:"componentWillUnmount",value:function(){this._softKey.destroy()}},{key:"_setOnLoginPage",value:function(){var e=this;this.setState({onLoginPage:!0},function(){e.focus()});var t=document.activeElement.dataset.actionType;(0,m.showLoginPage)({authenticatorId:t}).then(function(){return"leavePage"}).catch(function(e){if("access denied"===e)d.default.request("ToastManager:show",{text:P("add-account-failed")});else if("duplicate_account"===e)return d.default.request("ToastManager:show",{text:P("duplicate-account-warn")}),(0,m.operateSync)(m.SYNC_OPERATION.PULL_ALL).then(function(){return"leavePage"});return!0}).then(function(t){e.setState({onLoginPage:!1}),"leavePage"===t&&d.default.request("back")})}},{key:"componentDidUpdate",value:function(){this.debug("did update");var e=this.state.onLoginPage;this._softKey.update({left:e?"":"cancel",center:e?"":"select"})}},{key:"render",value:function(){var e=this,t=this.state.onLoginPage,n=m.authenticatorIds.map(function(e){return _.default.EMAIL_INSTALLED&&!d.default.query("isLowMemoryDevice")||"activesync"!==e?c.default.createElement(b.default,{key:e,"data-action-type":e},e[0].toUpperCase()+e.slice(1)):""});return c.default.createElement("div",{ref:function(t){e.element=t},tabIndex:"-1",className:"account-adding",onKeyDown:this.onKeyDown},c.default.createElement("div",{className:"header h1","data-l10n-id":"add-account"}),t?c.default.createElement(b.default,{primaryId:"setting-up-account",navigable:!1,isLoading:!0}):n)}}]),t}(l.default);exports.default=w}});
//# sourceMappingURL=27.bundle.js.map