webpackJsonp([8],{301:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=t(3),l=n(u),c=t(5),s=n(c),f=t(24),d=n(f),v=t(21),p=n(v),b=t(82),y=n(b),h=t(302),m=n(h),g=t(25),_=n(g),w=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.name="VoicemailEditor",n.cardNum=0,n.DEBUG=!1,n.state={values:m.default.getValues()},n.onKeyDown=n.onKeyDown.bind(n),n.onFocus=n.onFocus.bind(n),n._updateValues=n._updateValues.bind(n),n}return r(t,e),i(t,[{key:"componentDidMount",value:function(){this.debug("did mount"),this.cardNum=navigator.mozIccManager?navigator.mozIccManager.iccIds.length:0,this.navigator=new d.default(".list-item:not(.disabled) .navigable",this.element),this.updateSoftKeys(),m.default.on("changed",this._updateValues)}},{key:"componentWillUnmount",value:function(){m.default.off("changed",this._updateValues)}},{key:"_updateValues",value:function(){this.setState({values:m.default.getValues()})}},{key:"updateSoftKeys",value:function(e){var t={left:"cancel",right:e?"save":""};this._softKey=p.default.create(this.element,t)}},{key:"onKeyDown",value:function(e){switch(this.debug("onKeyDown: key:",e.key),e.key){case"SoftRight":if(!this.element.contains(document.activeElement)||!this.cardNum)break;if(!this._softKey.getSoftKeyValue("right"))break;m.default.set(this.state.values),_.default.backOrClose();break;case"SoftLeft":case"Backspace":e.preventDefault(),e.stopPropagation(),_.default.backOrClose()}}},{key:"onFocus",value:function(){this.updateSoftKeys()}},{key:"render",value:function(){var e=this;this.debug("render");var t="voice-mail-number",n=void 0,a=navigator.mozMobileConnections,o=Array.prototype.map.call(a,function(o,r){var i=o.iccId,u=function(t){var n=[].concat(e.state.values);n[r]=t.target.value,e.setState({values:n}),e.updateSoftKeys(!0)};return 1===a.length?(t="voice-mail-number-single",n=null):n=JSON.stringify({n:r+1}),l.default.createElement(y.default,{key:r,type:"tel",labelL10nId:t,labelL10nArgs:n,disabled:!i||navigator.mozVoicemail.getNumber(r),ariaLabel:"voice-mail",maxLength:20,value:i?e.state.values[r]:"",onChange:u})});return l.default.createElement("div",{ref:function(t){e.element=t},id:"voicemail-editor",tabIndex:"-1",role:"form",onKeyDown:this.onKeyDown,onFocus:this.onFocus},l.default.createElement("div",{className:"header h1","data-l10n-id":"voice-mail"}),o)}}]),t}(s.default);exports.default=w},302:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=t(38),l=n(u),c=t(8),s=n(c),f=t(4),d=n(f),v=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name="Voicemail",e.DEBUG=!1,e.values=[],l.default.addObserver("ril.iccInfo.mbdn",e),e}return r(t,e),i(t,[{key:"getValues",value:function(){return[].concat(this.values)}},{key:"set",value:function(e){l.default.set({"ril.iccInfo.mbdn":Array.isArray(e)?e:[e]}),d.default.request("ToastManager:show",{text:navigator.mozL10n.get("voice-mail-number-updated")})}},{key:"_observe_ril.iccInfo.mbdn",value:function(e){this.debug("detect voicemail changed:",e);var t=navigator.mozMobileConnections.length;this.values=Array.isArray(e)?e:[e],this.values=this.values.map(function(e,n){if(!(n>=t))return e||navigator.mozVoicemail.getNumber(n)}),this.emit("changed")}}]),t}(s.default),p=new v;window.vm=p,exports.default=p}});
//# sourceMappingURL=8.bundle.js.map