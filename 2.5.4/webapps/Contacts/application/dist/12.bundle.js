webpackJsonp([12],{281:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=t(3),l=n(u),c=t(10),s=n(c),f=t(5),d=n(f),p=t(21),h=n(p),m=t(4),b=n(m),y=t(24),v=n(y),g=t(11),k=n(g),_=t(339),w=n(_),E=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.FOCUS_SELECTOR=".list-item.navigable",n.change_item=!1,n.state={block:k.default.fullBlockContacts},n}return r(t,e),i(t,[{key:"componentDidMount",value:function(){window.bv=this,this.element=s.default.findDOMNode(this),this.navigator=new v.default(this.FOCUS_SELECTOR,this.element),this.updateSoftKeys(),window.navigator.mozContacts.addEventListener("blockednumberchange",this)}},{key:"componentDidUpdate",value:function(){if(this.element.focus(),this.change_item){this.change_item=!1;var e=this.element.querySelectorAll(this.FOCUS_SELECTOR),t=e[e.length-1];this.navigator.setFocus(t)}}},{key:"_handle_blockednumberchange",value:function(){this.setState({block:k.default.fullBlockContacts})}},{key:"componentWillUnmount",value:function(){window.navigator.mozContacts.removeEventListener("blockednumberchange",this),this._softKey.destroy()}},{key:"updateSoftKeys",value:function(){var e={left:"add"};this.state.block.size>0&&(e={left:"add",right:"unblock"}),this._softKey=h.default.create(this.element,e)}},{key:"onKeyDown",value:function(e){var t=this;switch(e.key){case"Backspace":e.preventDefault(),e.stopPropagation(),b.default.request("back");break;case"SoftRight":e.preventDefault(),e.stopPropagation();var n=document.activeElement.querySelector(".primary").getAttribute("data-name");k.default.removeBlockContact(n).then(function(){b.default.request("ToastManager:show",{text:navigator.mozL10n.get("remove-block-alert")});var e=t.element.querySelectorAll(t.FOCUS_SELECTOR);e.item(e.length-1)===document.activeElement&&(t.change_item=!0)});break;case"SoftLeft":e.preventDefault(),e.stopPropagation(),b.default.request("showDialog",{type:"prompt",header:"add-block-header",inputType:"tel",maxLength:20,hideOkWhenNoInputValue:!0,ok:"save",onOk:function(e){if(t.state.block.has(e))return void b.default.request("ToastManager:show",{text:navigator.mozL10n.get("duplicate-block-number")});k.default.addBlockContact(e).then(function(){t.change_item=!0})}})}}},{key:"onFocus",value:function(){this.updateSoftKeys()}},{key:"render",value:function(){var e=this,t=[];return this.state.block.forEach(function(e,n){t.push(l.default.createElement(w.default,{blockitem:n}))}),l.default.createElement("div",{id:"setting-view",tabIndex:"-1",onKeyDown:function(t){return e.onKeyDown(t)},onFocus:function(){return e.onFocus()}},l.default.createElement("div",{className:"header h1","data-l10n-id":"block-contacts"}),l.default.createElement("div",{className:"body"},t))}}]),t}(d.default);exports.default=E},339:function(e,exports,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=t(3),l=n(u),c=t(5),s=n(c),f=t(11),d=n(f),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){var e=this.props.blockitem,t=d.default.speedFindContactByNumber(e),n=[],o=0;return t.forEach(function(e){++o<=5&&n.push(l.default.createElement("div",{className:"secondary"},l.default.createElement("span",null,e)))}),o>5&&n.push(l.default.createElement("div",{className:"secondary"},l.default.createElement("span",{"data-l10n-id":"ellipsis"}))),l.default.createElement("div",{className:"list-item navigable",tabIndex:"-1"},l.default.createElement("div",{className:"content"},l.default.createElement("div",{className:"primary","data-name":e},e),n))}}]),t}(s.default);exports.default=p}});
//# sourceMappingURL=12.bundle.js.map