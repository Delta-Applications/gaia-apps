webpackJsonp([19],{292:function(e,exports,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),s=t(3),l=r(s),c=t(10),u=r(c),f=t(4),d=r(f),m=t(5),p=r(m),h=t(21),y=r(h),v=t(130),b=r(v),w=function(e){function t(e){a(this,t);var r=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name="ImportSimView",r.state={saved:"",progress:0,total:0,error:!1},r}return o(t,e),i(t,[{key:"componentDidMount",value:function(){var e={left:"cancel"};this.element=u.default.findDOMNode(this),window.ssv=this,this._softKey=y.default.create(this.element,e),this.import()}},{key:"import",value:function(){var e=this;b.default.import(+this.props.index).then(function(t){e.importer=t,t.on("ready",function(){e.setState({total:t.total})}),t.on("imported",function(r){e.setState({saved:r,progress:t.imported})}),t.on("finished",function(){d.default.request("back")}),t.on("error",function(){e.setState({error:!0})})})}},{key:"componentDidUpdate",value:function(){this.updateSoftKeys()}},{key:"componentWillUnmount",value:function(){this._softKey.destroy()}},{key:"updateSoftKeys",value:function(){var e={};this.state.error?(e.left="cancel",e.right="retry"):e.left="cancel",this._softKey.update(e)}},{key:"onKeyDown",value:function(e){switch(e.key){case"SoftLeft":case"EndCall":case"Backspace":e&&e.preventDefault(),this.importer&&this.importer.cancel(),d.default.request("back");break;case"SoftRight":this.state.error&&(this.setState({error:!1}),this.importer&&this.importer.import())}}},{key:"render",value:function(){var e=this,t=null,r=null,a=null;if(this.state.error)a=l.default.createElement("div",{className:"primary","data-l10n-id":"simContacts-error"});else if(this.state.total){var n=this.state.progress/this.state.total*100,o={width:n+"%"},i={width:"calc(100% - "+n+"% - 0.3rem)"};t=l.default.createElement("div",{className:"progress"},l.default.createElement("div",{className:"progress-active",style:o}),l.default.createElement("div",{className:"progress-inactive",style:i})),r=l.default.createElement("div",{className:"secondary"},this.state.progress,"/",this.state.total),a=l.default.createElement("div",{className:"primary","data-l10n-id":"importing-contacts-from-sim"})}else a=l.default.createElement("div",{className:"primary","data-l10n-id":"reading-contacts-from-sim"});return l.default.createElement("div",{tabIndex:"-1",onKeyDown:function(t){return e.onKeyDown(t)}},l.default.createElement("div",{className:"header h1",ref:"header","data-l10n-id":"importing"}),l.default.createElement("div",{className:"body"},l.default.createElement("div",{className:"list-item","data-multi-line":"true"},l.default.createElement("div",{className:"content"},a,r,t))))}}]),t}(p.default);exports.default=w}});
//# sourceMappingURL=19.bundle.js.map